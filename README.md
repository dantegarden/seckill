# seckill

在static_page分支的基础上，将秒杀接口改为异步下单
- 1.服务启动时将秒杀商品库存写入redis
- 2.秒杀请求到达后台，先判断是否已秒杀过（redis中存在该用户该商品的订单），若没有，则在redis上做预减库存
- 3.如果有可减库存，将哪个用户秒杀哪个商品的信息推入队列，并返回排队中。如果没有可减库存，则返回秒杀结束。
- 4.队列消费者从队列中取出信息，判断是否秒杀过、是否有库存（数据库里是否有库存）通过，则做数据库层面上的减库存、下订单，下过的订单缓存到redis
- 5.页面在3之后一直轮询后端，获取秒杀结果。如果redis里有该用户该商品的订单，则秒杀成功，若库存为空，则秒杀失败，若有库存没订单，则继续轮询

局域网单tomcat，G1GC

秒杀接口QPS：900/sec

为方便测试，准备了一个一键还原的接口
```${context-path}/seckill/reset```

